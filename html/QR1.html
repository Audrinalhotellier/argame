<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="../css/styles.css" />
    <link rel="stylesheet" href="../css/son.css">
    <title>QR1</title>
  </head>
  <body>
    <script src="./script/son.js"></script>
    <button class="volume" onclick="toggleAudio()">
      <input type="checkbox" id="volumeCheckbox">
      <svg viewBox="0 0 108 96">
        <path d="M7,28 L35,28 L35,28 L59,8 L59,88 L35,68 L7,68 C4.790861,68 3,66.209139 3,64 L3,32 C3,29.790861 4.790861,28 7,28 Z"></path>
      </svg>
    </button>
    <!-- Ajouter cet élément audio pour le son d'ambiance -->
    <audio id="ambianceAudio" loop>
      <source src="../assets/ambiance.mp3" type="audio/mp3" />
      Your browser does not support the audio tag.
    </audio>

    <div id="container1" class="container" onclick="changerApparence(this)">
      <div class="background-image">
        <p>
          Le Lorem Ipsum est simplement du faux texte employé dans la
          composition et la mise en page avant impression. Le Lorem Ipsum est le
          faux texte standard de l'imprimerie depuis les années 1500, quand un
          imprimeur anonyme assembla ensemble des morceaux de texte pour
          réaliser un livre spécimen de polices de texte.
        </p>
      </div>
      <div class="navigation-buttons">
        <div class="navigation-button" onclick="retourAuDebut()">
          Revenir au Début
        </div>
      </div>
    </div>

    <div
      id="container2"
      class="container hidden"
      onclick="changerApparence(this)"
    >
      <div class="background-image">
        <p>
          Il n'a pas fait que survivre cinq siècles, mais s'est aussi adapté à
          la bureautique informatique, sans que son contenu n'en soit modifié.
          Il a été popularisé dans les années 1960 grâce à la vente de feuilles
          Letraset contenant des passages du Lorem Ipsum, et, plus récemment,
          par son inclusion dans des applications de mise en page de texte,
          comme Aldus PageMaker.
        </p>
      </div>
      <div class="navigation-buttons">
        <div class="navigation-button" onclick="retourAuDebut()">
          Revenir au Début
        </div>
      </div>
    </div>

    <div
      id="container3"
      class="container hidden"
      onclick="changerApparence(this)"
    >
      <video
        id="videoContainer3"
        width="100%"
        height="100%"
        controls
        onended="videoEnded()"
        onclick="lancerVideo()"
      >
        <source src="../assets/mov_bbb.mp4" type="video/mp4" />
        Your browser does not support the video tag.
      </video>
      <div class="navigation-buttons">
        <div class="navigation-button" onclick="retourAuDebut()">
          Revenir au Début
        </div>
      </div>
    </div>
    <div id="container4" class="container hidden">
      <a href="../html/continuer.html"><img src="../assets/porte.jpg" alt="" /></a>
      <a href="../html/continuer.html "><img src="../assets/porte.jpg" alt="" /></a>
      <div class="navigation-buttons">
        <div class="navigation-button" onclick="retourAuDebut()">
          Revenir au Début
        </div>
      </div>
    </div>

    <form action="../html/continuer.html" method="get" target="_blank">
      <button type="submit">Continuer</button>
    </form> 

    <script>
      var containers = document.querySelectorAll(".container");
      var ambianceAudio = document.getElementById("ambianceAudio");
      var videoContainer3 = document.getElementById("videoContainer3");
      var clics = 0;
      var videoPlaying = false;
      var ambianceAudioPlayed = false;

      // Lancer le son d'ambiance lorsque le contenu de la page est chargé
      document.addEventListener("DOMContentLoaded", function () {
        if (!ambianceAudioPlayed) {
          ambianceAudio.play();
          ambianceAudioPlayed = true;
        }
      });

      function changerApparence(container) {
        var containerActuel = containers[clics % containers.length];
        containerActuel.classList.add("hidden");

        clics++;

        var containerSuivant = containers[clics % containers.length];
        containerSuivant.classList.remove("hidden");

        // Gérer la lecture du son en fonction du type de contenu
        var isVideo = containerSuivant.querySelector("video");

        if (isVideo) {
          videoPlaying = false;
          ambianceAudio.pause();
          ambianceAudio.currentTime = 0;
        } else {
          if (!videoPlaying && !ambianceAudioPlayed) {
            ambianceAudio.play();
            ambianceAudioPlayed = true;
          }
        }
      }

      function retourAuDebut() {
        // Ajouter le code pour rediriger vers index.html
        window.location.href = '../index.html';
      }

      function videoEnded() {
        videoContainer3.currentTime = 0;
        ambianceAudio.play();
        videoPlaying = false;
      }

      function lancerVideo() {
        ambianceAudio.pause();
        videoPlaying = true;
      }
    </script>
  </body>
</html>
